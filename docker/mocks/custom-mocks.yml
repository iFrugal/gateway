# =============================================================================
# Custom Mock API Configurations
# =============================================================================
# Mount this file as /app/mocks/custom-mocks.yml in Docker
# =============================================================================

# Simple GET endpoint
- request:
    uri: /mock/hello
    httpMethod: GET
  response:
    body: |
      {
        "message": "Hello from Spring Gateway Toolkit!",
        "timestamp": "${.now?string('yyyy-MM-dd HH:mm:ss')}"
      }
    contentType: application/json
    statusCode: 200

# POST endpoint with body template
- request:
    uri: /mock/echo
    httpMethod: POST
  response:
    bodyTemplate: true
    body: |
      {
        "echo": ${request.body},
        "method": "${request.httpMethod}",
        "uri": "${request.requestUri}"
      }
    contentType: application/json
    statusCode: 200

# Endpoint with custom headers
- request:
    uri: /mock/headers
    httpMethod: GET
  response:
    body: |
      {
        "status": "success"
      }
    contentType: application/json
    statusCode: 200
    responseHeaders:
      X-Custom-Header: "custom-value"
      X-Request-Id: "${uuid1}"

# Endpoint with validation
- request:
    uri: /mock/validate
    httpMethod: POST
    validation:
      bodySchema: |
        {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "type": "object",
          "properties": {
            "name": { "type": "string", "minLength": 1 },
            "email": { "type": "string", "format": "email" }
          },
          "required": ["name", "email"]
        }
      headers:
        "authorization":
          required: true
          regexValidator: "Bearer .*"
  response:
    body: |
      {
        "status": "validated",
        "message": "Request passed all validations"
      }
    contentType: application/json
    statusCode: 200
