# =============================================================================
# Docker Profile Configuration
# =============================================================================
# This file is loaded when running in Docker with SPRING_PROFILES_ACTIVE=docker
# Place your custom configuration here and mount as /app/config/application-docker.yml
# =============================================================================

# Example: Define your routes
spring:
  cloud:
    gateway:
      routes:
        # Example: Route to a backend service
        # - id: backend-service
        #   uri: http://backend:8081
        #   predicates:
        #     - Path=/api/**

        # Example: Route using Consul service discovery
        # - id: user-service
        #   uri: lb://user-service
        #   predicates:
        #     - Path=/users/**

# Gateway Toolkit Configuration
gateway:
  # Logging configuration
  logging:
    enabled: true
    requests:
      - paths: ["/api/**"]
        methods: ["*"]
        exclude-body: false
      - paths: ["/health", "/actuator/**"]
        methods: ["*"]
        exclude-body: true

  # Caching configuration
  caching:
    enabled: true
    default-ttl: 3600
    max-size: 10000
    rules:
      - paths: ["/api/static/**"]
        methods: [GET]
        ttl: 86400  # 1 day

  # CORS configuration
  cors:
    enabled: true
    allowed-origins:
      - http://localhost:3000
      - http://localhost:8080
    allowed-methods:
      - GET
      - POST
      - PUT
      - DELETE
      - OPTIONS
    allowed-headers:
      - "*"
    max-age: 3600
    allow-credentials: true

  # Conman Mock API
  conman:
    enabled: true
    servlet-uri-mappings:
      - /mock/**
    mapping-files:
      - classpath:conman.yml
      - file:/app/mocks/custom-mocks.yml

  # Security (disabled by default in docker profile)
  security:
    enabled: false
    guest-allowed-paths:
      - /api/public/**
      - /mock/**

# Logging
logging:
  level:
    io.github.springgateway: DEBUG
